{% liquid
	# check settings for preferred media types
	assign desktop_media_type = block.settings.desktop_media_type
	if desktop_media_type == 'product_media'
		assign mobile_media_type = 'none'
	else
		assign mobile_media_type = block.settings.mobile_media_type
	endif

	assign media_class = media_class | default: 'absolute top-0 left-0 w-100 h-100 object-cover'
	assign wrapper_class = wrapper_class | append: ' settings-overlay media media--' | append: aspect_ratio
%}
<art-direction
	class="artwork artwork--desktop-{{ desktop_media_type }} artwork--mobile-{{ mobile_media_type }}"
	{{ block.shopify_attributes }}
>
	{% if use_placeholder %}
	{% else %}
		{% content_for 'blocks' %}
	{% endif %}
</art-direction>

{% schema %}
	{
		"name": "Artwork",
		"tag": null,
		"blocks": [
			{
				"type": "_art-image"
			},
			{
				"type": "_art-video"
			}
		],
		"settings": [
			{
				"type": "header",
				"content": "Artwork"
			},
			{
				"type": "select",
				"id": "desktop_media_type",
				"label": "Desktop Media Type",
				"options": [
					{
						"value": "image",
						"label": "Image"
					},
					{
						"value": "video",
						"label": "Video"
					},
					{
						"value": "product_media",
						"label": "Product Media"
					}
				],
				"default": "image",
				"info": "Set to 'Product Media' if you want to use this block to loop through a product media gallery. Be sure to set both video and image blocks to use the product media."
			},
			{
				"type": "select",
				"id": "mobile_media_type",
				"label": "Mobile Media Type",
				"options": [
					{
						"value": "image",
						"label": "Image"
					},
					{
						"value": "video",
						"label": "Video"
					},
					{
						"value": "none",
						"label": "Same as Desktop"
					}
				],
				"default": "none",
				"info": "Set to 'Same as Desktop' if you want to leave this blank. If 'Desktop Media Type' is set to 'Product Media', then the desktop media will always be used."
			}
		],
		"presets": [
			{
				"name": "Artwork: Video w/Mobile Fallback",
				"settings": {
					"second_block_behavior": "fallback"
				},
				"blocks": [
					{
						"type": "_art-video"
					},
					{
						"type": "_art-image"
					}
				]
			},
			{
				"name": "Artwork: Image D/M",
				"blocks": [
					{
						"type": "_art-image"
					}
				]
			},
			{
				"name": "Artwork: Video D/M",
				"blocks": [
					{
						"type": "_art-video"
					}
				]
			},
			{
				"name": "Artwork: Image D, Image M",
				"blocks": [
					{
						"type": "_art-image"
					},
					{
						"type": "_art-image"
					}
				]
			},
			{
				"name": "Artwork: Video D, Image M",
				"blocks": [
					{
						"type": "_art-video"
					},
					{
						"type": "_art-image"
					}
				]
			},
			{
				"name": "Artwork: Video D, Video M",
				"blocks": [
					{
						"type": "_art-video"
					},
					{
						"type": "_art-video"
					}
				]
			}
		]
	}
{% endschema %}
