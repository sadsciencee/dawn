{"version":3,"file":"js-optional-share-button-5601b61e.js","sources":["../src/scripts/optional/share-button.ts","../src/entry/js-optional-share-button.ts"],"sourcesContent":["import { DetailsDisclosure } from '@/scripts/theme/details-disclosure'\nimport { qsRequired } from '@/scripts/functions'\nimport { type uCoastWindow } from '@/scripts/setup';\n\ndeclare let window: uCoastWindow\n\nexport class ShareButton extends DetailsDisclosure {\n\tstatic override htmlSelector = 'share-button'\n\telements: {\n\t\tshareButton: HTMLButtonElement\n\t\tshareSummary: HTMLElement\n\t\tcloseButton: HTMLElement\n\t\tsuccessMessage: HTMLElement\n\t\turlInput: HTMLInputElement\n\t}\n\turlToShare: string\n\tconstructor() {\n\t\tsuper()\n\n\t\tthis.elements = {\n\t\t\tshareButton: qsRequired('button', this),\n\t\t\tshareSummary: qsRequired('summary', this),\n\t\t\tcloseButton: qsRequired('.share-button__close', this),\n\t\t\tsuccessMessage: qsRequired('[id^=\"ShareMessage\"]', this),\n\t\t\turlInput: qsRequired('input', this),\n\t\t}\n\t\tthis.urlToShare = this.elements.urlInput\n\t\t\t? this.elements.urlInput.value\n\t\t\t: document.location.href\n\n\t\tif (navigator.share) {\n\t\t\tthis.mainDetailsToggle.setAttribute('hidden', '')\n\t\t\tthis.elements.shareButton.classList.remove('hidden')\n\t\t\tthis.elements.shareButton.addEventListener('click', () => {\n\t\t\t\tvoid navigator.share({ url: this.urlToShare, title: document.title })\n\t\t\t})\n\t\t} else {\n\t\t\tthis.mainDetailsToggle.addEventListener('toggle', this.toggleDetails.bind(this))\n\t\t\tqsRequired('.share-button__copy', this.mainDetailsToggle).addEventListener(\n\t\t\t\t'click',\n\t\t\t\tthis.copyToClipboard.bind(this)\n\t\t\t)\n\t\t\tqsRequired('.share-button__close', this.mainDetailsToggle).addEventListener(\n\t\t\t\t'click',\n\t\t\t\tthis.close.bind(this)\n\t\t\t)\n\t\t}\n\t}\n\n\ttoggleDetails() {\n\t\tif (!this.mainDetailsToggle.open) {\n\t\t\tthis.elements.successMessage.classList.add('hidden')\n\t\t\tthis.elements.successMessage.textContent = ''\n\t\t\tthis.elements.closeButton.classList.add('hidden')\n\t\t\tthis.elements.shareSummary.focus()\n\t\t}\n\t}\n\n\tcopyToClipboard() {\n\t\tnavigator.clipboard.writeText(this.elements.urlInput.value).then(() => {\n\t\t\tthis.elements.successMessage.classList.remove('hidden')\n\t\t\tthis.elements.successMessage.textContent = window.accessibilityStrings.shareSuccess\n\t\t\tthis.elements.closeButton.classList.remove('hidden')\n\t\t\tthis.elements.closeButton.focus()\n\t\t})\n\t}\n\n\tupdateUrl(url: string) {\n\t\tthis.urlToShare = url\n\t\tthis.elements.urlInput.value = url\n\t}\n}\n","import { safeDefineElement } from '@/scripts/functions';\nimport { ShareButton } from '@/scripts/optional/share-button';\n\nsafeDefineElement(ShareButton)\n"],"names":["ShareButton","DetailsDisclosure","qsRequired","url","safeDefineElement"],"mappings":"uIAMO,MAAMA,UAAoBC,CAAkB,CAUlD,aAAc,CACP,QAEN,KAAK,SAAW,CACf,YAAaC,EAAW,SAAU,IAAI,EACtC,aAAcA,EAAW,UAAW,IAAI,EACxC,YAAaA,EAAW,uBAAwB,IAAI,EACpD,eAAgBA,EAAW,uBAAwB,IAAI,EACvD,SAAUA,EAAW,QAAS,IAAI,CAAA,EAE9B,KAAA,WAAa,KAAK,SAAS,SAC7B,KAAK,SAAS,SAAS,MACvB,SAAS,SAAS,KAEjB,UAAU,OACR,KAAA,kBAAkB,aAAa,SAAU,EAAE,EAChD,KAAK,SAAS,YAAY,UAAU,OAAO,QAAQ,EACnD,KAAK,SAAS,YAAY,iBAAiB,QAAS,IAAM,CACpD,UAAU,MAAM,CAAE,IAAK,KAAK,WAAY,MAAO,SAAS,KAAA,CAAO,CAAA,CACpE,IAED,KAAK,kBAAkB,iBAAiB,SAAU,KAAK,cAAc,KAAK,IAAI,CAAC,EACpEA,EAAA,sBAAuB,KAAK,iBAAiB,EAAE,iBACzD,QACA,KAAK,gBAAgB,KAAK,IAAI,CAAA,EAEpBA,EAAA,uBAAwB,KAAK,iBAAiB,EAAE,iBAC1D,QACA,KAAK,MAAM,KAAK,IAAI,CAAA,EAGvB,CAEA,eAAgB,CACV,KAAK,kBAAkB,OAC3B,KAAK,SAAS,eAAe,UAAU,IAAI,QAAQ,EAC9C,KAAA,SAAS,eAAe,YAAc,GAC3C,KAAK,SAAS,YAAY,UAAU,IAAI,QAAQ,EAC3C,KAAA,SAAS,aAAa,QAE7B,CAEA,iBAAkB,CACP,UAAA,UAAU,UAAU,KAAK,SAAS,SAAS,KAAK,EAAE,KAAK,IAAM,CACtE,KAAK,SAAS,eAAe,UAAU,OAAO,QAAQ,EACtD,KAAK,SAAS,eAAe,YAAc,OAAO,qBAAqB,aACvE,KAAK,SAAS,YAAY,UAAU,OAAO,QAAQ,EAC9C,KAAA,SAAS,YAAY,OAAM,CAChC,CACF,CAEA,UAAUC,EAAa,CACtB,KAAK,WAAaA,EACb,KAAA,SAAS,SAAS,MAAQA,CAChC,CACD,CAjEaH,EACI,aAAe,eCJhCI,EAAkBJ,CAAW"}