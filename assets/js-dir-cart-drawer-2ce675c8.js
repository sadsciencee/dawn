import{q as r,a as c,c as u,b as h,o as p,s as n}from"./functions-de1108d3.js";import{t as b,r as E}from"./global-86a0ee8d.js";import{U as v}from"./UcoastEl-5d53ad84.js";import{C as y,a as f,b as w}from"./cart-remove-button-56aabffb.js";import"./pubsub-54ee595b.js";import"./setup-240a0a56.js";import"./shopify-9954b672.js";class d extends v{constructor(){super(),this.addEventListener("keyup",e=>e.code==="Escape"&&this.close()),this.getOverlay().addEventListener("click",this.close.bind(this)),this.setHeaderCartIconAccessibility()}getOverlay(){return r("#CartDrawer-Overlay",this)}setHeaderCartIconAccessibility(){const e=r("#cart-icon-bubble");e.setAttribute("role","button"),e.setAttribute("aria-haspopup","dialog"),e.addEventListener("click",t=>{t.preventDefault(),this.open(e)}),e.addEventListener("keydown",t=>{t.code.toUpperCase()==="SPACE"&&(t.preventDefault(),this.open(e))})}open(e){e&&this.setActiveElement(e);const t=c('[id^="Details-"] summary',this);t&&!t.hasAttribute("role")&&this.setSummaryAccessibility(t),setTimeout(()=>{this.classList.add("animate","active")},1),this.addEventListener("transitionend",()=>{const s=this.classList.contains("is-empty")?r(".drawer__inner-empty",this):r("#CartDrawer"),i=c(".drawer__inner",this)||r(".drawer__close",this);b(s,i)},{once:!0}),document.body.classList.add("overflow-hidden")}close(){this.classList.remove("active"),E(this.activeElement),document.body.classList.remove("overflow-hidden")}setSummaryAccessibility(e){const t=e.parentElement;if(!t)throw new Error("setSummaryAccessibility failed - No parent element found");e.setAttribute("role","button"),e.setAttribute("aria-expanded","false");const s=e.nextElementSibling;s instanceof HTMLElement&&s.hasAttribute("id")&&e.setAttribute("aria-controls",s.id),e.addEventListener("click",i=>{const a=u(i),o=h(a,"details");a.setAttribute("aria-expanded",`${!(o!=null&&o.hasAttribute("open"))}`)}),t.addEventListener("keyup",p)}renderContents(e){r(".drawer__inner",this).classList.contains("is-empty")&&r(".drawer__inner",this).classList.remove("is-empty"),this.productId=e.id,this.getSectionsToRender().forEach(t=>{const s=t.id;if(!s)throw new Error("Section id is required");const i=t.selector?r(t.selector):r(`#${s}`);i.innerHTML=this.getSectionInnerHTML(e.sections[s],t.selector)}),setTimeout(()=>{this.getOverlay().addEventListener("click",this.close.bind(this)),this.open()})}getSectionInnerHTML(e,t=".shopify-section"){const s=new DOMParser().parseFromString(e,"text/html");return r(t,s.documentElement).innerHTML}getSectionsToRender(){return[{id:"cart-drawer",selector:"#CartDrawer"},{id:"cart-icon-bubble"}]}getSectionDOM(e,t=".shopify-section"){return new DOMParser().parseFromString(e,"text/html").querySelector(t)}setActiveElement(e){this.activeElement=e}}d.htmlSelector="cart-drawer";class l extends y{getSectionsToRender(){return[{id:"CartDrawer",section:"cart-drawer",selector:".drawer__inner"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"}]}}l.htmlSelector="cart-drawer-items";n(d);n(f);n(l);n(w);
//# sourceMappingURL=js-dir-cart-drawer-2ce675c8.js.map
