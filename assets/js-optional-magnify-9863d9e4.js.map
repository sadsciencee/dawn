{"version":3,"file":"js-optional-magnify-9863d9e4.js","sources":["../src/scripts/optional/magnify.ts","../src/entry/js-optional-magnify.ts"],"sourcesContent":["function toggleLoadingSpinner(image: HTMLImageElement) {\n  const loadingSpinner = image?.parentElement?.parentElement?.querySelector(`[data-uc-spinner]`)\n  if (!loadingSpinner) return\n  loadingSpinner.classList.toggle('hidden')\n}\n\nfunction moveWithHover(\n  image: HTMLImageElement,\n  overlay: HTMLElement,\n  event: MouseEvent,\n  zoomRatio: number\n) {\n  // calculate mouse position\n  const ratio = image.height / image.width\n  const target: EventTarget | null = event.target\n  if (!(target instanceof HTMLElement)) return\n  const container = target.getBoundingClientRect()\n  const xPosition = event.clientX - container.left\n  const yPosition = event.clientY - container.top\n  const xPercent = `${xPosition / (image.clientWidth / 100)}%`\n  const yPercent = `${yPosition / ((image.clientWidth * ratio) / 100)}%`\n\n  // determine what to show in the frame\n  overlay.style.backgroundPosition = `${xPercent} ${yPercent}`\n  overlay.style.backgroundSize = `${image.width * zoomRatio}px`\n}\n\nfunction magnify(image: HTMLImageElement, zoomRatio: number) {\n  // create a container and set the full-size image as its background\n  const overlayImage = document.createElement('img')\n  overlayImage.setAttribute('src', `${image.src}`)\n  const overlay = document.createElement('div')\n  overlay.setAttribute('class', 'image-magnify-full-size')\n  overlay.setAttribute('aria-hidden', 'true')\n  overlay.style.backgroundImage = `url('${overlayImage.src}')`\n  overlay.style.backgroundColor = 'var(--gradient-background)'\n\n  image.style.opacity = '50%'\n  toggleLoadingSpinner(image)\n\n  overlayImage.onload = () => {\n    toggleLoadingSpinner(image)\n    const parent: HTMLElement | null = image.parentElement\n    if (!parent) return\n    parent.insertBefore(overlay, image)\n    image.style.opacity = '100%'\n  }\n\n  overlay.onclick = () => overlay.remove()\n  overlay.onmousemove = (event) => moveWithHover(image, overlay, event, zoomRatio)\n  overlay.onmouseleave = () => overlay.remove()\n  return overlay\n}\n\nexport function enableZoomOnHover(zoomRatio: number): void {\n  const images = document.querySelectorAll('.image-magnify-hover')\n  if (!images) return\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i] as HTMLImageElement\n    if (!image) return\n    image.onclick = (event) => {\n      const overlay: HTMLElement = magnify(image, zoomRatio)\n      if (!overlay) return\n      moveWithHover(image, overlay, event, zoomRatio)\n    }\n  }\n}\n","import { enableZoomOnHover } from '@/scripts/optional/magnify';\n\nenableZoomOnHover(2);\n"],"names":["toggleLoadingSpinner","image","_a","_b","loadingSpinner","moveWithHover","overlay","event","zoomRatio","ratio","target","container","xPosition","yPosition","xPercent","yPercent","magnify","overlayImage","parent","enableZoomOnHover","images","i"],"mappings":"AAAA,SAASA,EAAqBC,EAAyB,CAAvD,IAAAC,EAAAC,EACE,MAAMC,GAAiBD,GAAAD,EAAAD,GAAA,YAAAA,EAAO,gBAAP,YAAAC,EAAsB,gBAAtB,YAAAC,EAAqC,cAAc,qBACrEC,GACUA,EAAA,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASC,EACPJ,EACAK,EACAC,EACAC,EACA,CAEM,MAAAC,EAAQR,EAAM,OAASA,EAAM,MAC7BS,EAA6BH,EAAM,OACzC,GAAI,EAAEG,aAAkB,aAAc,OAChC,MAAAC,EAAYD,EAAO,wBACnBE,EAAYL,EAAM,QAAUI,EAAU,KACtCE,EAAYN,EAAM,QAAUI,EAAU,IACtCG,EAAW,GAAGF,GAAaX,EAAM,YAAc,QAC/Cc,EAAW,GAAGF,GAAcZ,EAAM,YAAcQ,EAAS,QAGvDH,EAAA,MAAM,mBAAqB,GAAGQ,KAAYC,IAClDT,EAAQ,MAAM,eAAiB,GAAGL,EAAM,MAAQO,KAClD,CAEA,SAASQ,EAAQf,EAAyBO,EAAmB,CAErD,MAAAS,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,aAAa,MAAO,GAAGhB,EAAM,KAAK,EACzC,MAAAK,EAAU,SAAS,cAAc,KAAK,EACpC,OAAAA,EAAA,aAAa,QAAS,yBAAyB,EAC/CA,EAAA,aAAa,cAAe,MAAM,EAClCA,EAAA,MAAM,gBAAkB,QAAQW,EAAa,QACrDX,EAAQ,MAAM,gBAAkB,6BAEhCL,EAAM,MAAM,QAAU,MACtBD,EAAqBC,CAAK,EAE1BgB,EAAa,OAAS,IAAM,CAC1BjB,EAAqBC,CAAK,EAC1B,MAAMiB,EAA6BjB,EAAM,cACpCiB,IACEA,EAAA,aAAaZ,EAASL,CAAK,EAClCA,EAAM,MAAM,QAAU,OAAA,EAGhBK,EAAA,QAAU,IAAMA,EAAQ,OAAO,EACvCA,EAAQ,YAAeC,GAAUF,EAAcJ,EAAOK,EAASC,EAAOC,CAAS,EACvEF,EAAA,aAAe,IAAMA,EAAQ,OAAO,EACrCA,CACT,CAEO,SAASa,EAAkBX,EAAyB,CACnD,MAAAY,EAAS,SAAS,iBAAiB,sBAAsB,EAC/D,GAAKA,EACL,QAASC,EAAI,EAAGA,EAAID,EAAO,OAAQC,IAAK,CAChC,MAAApB,EAAQmB,EAAOC,CAAC,EACtB,GAAI,CAACpB,EAAO,OACNA,EAAA,QAAWM,GAAU,CACnB,MAAAD,EAAuBU,EAAQf,EAAOO,CAAS,EAChDF,GACSD,EAAAJ,EAAOK,EAASC,EAAOC,CAAS,CAAA,EAGpD,CChEAW,EAAkB,CAAC"}