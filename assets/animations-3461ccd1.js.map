{"version":3,"file":"animations-3461ccd1.js","sources":["../src/scripts/theme/animations.ts"],"sourcesContent":["import { type uCoastWindow } from '@/scripts/setup';\nimport { throttle } from '@/scripts/functions';\n\nconst SCROLL_ANIMATION_TRIGGER_CLASSNAME = 'scroll-trigger';\nconst SCROLL_ANIMATION_OFFSCREEN_CLASSNAME = 'scroll-trigger--offscreen';\nconst SCROLL_ZOOM_IN_TRIGGER_CLASSNAME = 'animate--zoom-in';\nconst SCROLL_ANIMATION_CANCEL_CLASSNAME = 'scroll-trigger--cancel';\n\ndeclare let window:uCoastWindow\n\n// Scroll in animation logic\nfunction onIntersection(elements: IntersectionObserverEntry[], observer: IntersectionObserver) {\n  elements.forEach((element, index) => {\n    if (element.isIntersecting) {\n      const elementTarget = element.target;\n      if (elementTarget.classList.contains(SCROLL_ANIMATION_OFFSCREEN_CLASSNAME)) {\n        elementTarget.classList.remove(SCROLL_ANIMATION_OFFSCREEN_CLASSNAME);\n        if (elementTarget.hasAttribute('data-cascade'))\n          elementTarget.setAttribute('style', `--animation-order: ${index};`);\n      }\n      observer.unobserve(elementTarget);\n    } else {\n      element.target.classList.add(SCROLL_ANIMATION_OFFSCREEN_CLASSNAME);\n      element.target.classList.remove(SCROLL_ANIMATION_CANCEL_CLASSNAME);\n    }\n  });\n}\n\nexport function initializeScrollAnimationTrigger(rootEl:Document | HTMLElement = document, isDesignModeEvent = false) {\n  const animationTriggerElements = Array.from(rootEl.getElementsByClassName(SCROLL_ANIMATION_TRIGGER_CLASSNAME));\n  if (animationTriggerElements.length === 0) return;\n\n  if (isDesignModeEvent) {\n    animationTriggerElements.forEach((element) => {\n      element.classList.add('scroll-trigger--design-mode');\n    });\n    return;\n  }\n\n  const observer = new IntersectionObserver(onIntersection, {\n    rootMargin: '0px 0px -50px 0px',\n  });\n  animationTriggerElements.forEach((element) => observer.observe(element));\n}\n\n// Zoom in animation logic\nfunction initializeScrollZoomAnimationTrigger() {\n  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n\n  const animationTriggerElements = Array.from(document.getElementsByClassName(SCROLL_ZOOM_IN_TRIGGER_CLASSNAME));\n\n  if (animationTriggerElements.length === 0) return;\n\n  const scaleAmount = 0.2 / 100;\n\n  animationTriggerElements.forEach((element:Element) => {\n    if (!(element instanceof HTMLElement)) return;\n    let elementIsVisible = false;\n    const observer = new IntersectionObserver((elements:IntersectionObserverEntry[]) => {\n      elements.forEach((entry) => {\n        elementIsVisible = entry.isIntersecting;\n      });\n    });\n    observer.observe(element);\n\n    element.style.setProperty('--zoom-in-ratio', `${1 + scaleAmount * percentageSeen(element)}`);\n\n    window.addEventListener(\n      'scroll',\n      throttle(() => {\n        if (!elementIsVisible) return;\n\n        element.style.setProperty('--zoom-in-ratio', `${1 + scaleAmount * percentageSeen(element)}`);\n      }),\n      { passive: true }\n    );\n  });\n}\n\nfunction percentageSeen(element:HTMLElement) {\n  const viewportHeight = window.innerHeight;\n  const scrollY = window.scrollY;\n  const elementPositionY = element.getBoundingClientRect().top + scrollY;\n  const elementHeight = element.offsetHeight;\n\n  if (elementPositionY > scrollY + viewportHeight) {\n    // If we haven't reached the image yet\n    return 0;\n  } else if (elementPositionY + elementHeight < scrollY) {\n    // If we've completely scrolled past the image\n    return 100;\n  }\n\n  // When the image is in the viewport\n  const distance = scrollY + viewportHeight - elementPositionY;\n  let percentage = distance / ((viewportHeight + elementHeight) / 100);\n  return Math.round(percentage);\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  initializeScrollAnimationTrigger();\n  initializeScrollZoomAnimationTrigger();\n});\n\nif (window.Shopify.designMode) {\n  document.addEventListener('shopify:section:load', (event:Event) => {\n    if (event.target instanceof HTMLElement || event.target instanceof Document) {\n      initializeScrollAnimationTrigger(event.target, true)\n    }\n\n  });\n  document.addEventListener('shopify:section:reorder', () => initializeScrollAnimationTrigger(document, true));\n}\n"],"names":["SCROLL_ANIMATION_TRIGGER_CLASSNAME","SCROLL_ANIMATION_OFFSCREEN_CLASSNAME","SCROLL_ZOOM_IN_TRIGGER_CLASSNAME","SCROLL_ANIMATION_CANCEL_CLASSNAME","onIntersection","elements","observer","element","index","elementTarget","initializeScrollAnimationTrigger","rootEl","isDesignModeEvent","animationTriggerElements","initializeScrollZoomAnimationTrigger","scaleAmount","elementIsVisible","entry","percentageSeen","throttle","viewportHeight","scrollY","elementPositionY","elementHeight","percentage","event"],"mappings":"4CAGA,MAAMA,EAAqC,iBACrCC,EAAuC,4BACvCC,EAAmC,mBACnCC,EAAoC,yBAK1C,SAASC,EAAeC,EAAuCC,EAAgC,CACpFD,EAAA,QAAQ,CAACE,EAASC,IAAU,CACnC,GAAID,EAAQ,eAAgB,CAC1B,MAAME,EAAgBF,EAAQ,OAC1BE,EAAc,UAAU,SAASR,CAAoC,IACzDQ,EAAA,UAAU,OAAOR,CAAoC,EAC/DQ,EAAc,aAAa,cAAc,GAC7BA,EAAA,aAAa,QAAS,sBAAsBD,IAAQ,GAEtEF,EAAS,UAAUG,CAAa,OAExBF,EAAA,OAAO,UAAU,IAAIN,CAAoC,EACzDM,EAAA,OAAO,UAAU,OAAOJ,CAAiC,CACnE,CACD,CACH,CAEO,SAASO,EAAiCC,EAAgC,SAAUC,EAAoB,GAAO,CACpH,MAAMC,EAA2B,MAAM,KAAKF,EAAO,uBAAuBX,CAAkC,CAAC,EAC7G,GAAIa,EAAyB,SAAW,EAAG,OAE3C,GAAID,EAAmB,CACIC,EAAA,QAASN,GAAY,CACpCA,EAAA,UAAU,IAAI,6BAA6B,CAAA,CACpD,EACD,OAGI,MAAAD,EAAW,IAAI,qBAAqBF,EAAgB,CACxD,WAAY,mBAAA,CACb,EACDS,EAAyB,QAASN,GAAYD,EAAS,QAAQC,CAAO,CAAC,CACzE,CAGA,SAASO,GAAuC,CAC1C,GAAA,OAAO,WAAW,kCAAkC,EAAE,QAAS,OAEnE,MAAMD,EAA2B,MAAM,KAAK,SAAS,uBAAuBX,CAAgC,CAAC,EAE7G,GAAIW,EAAyB,SAAW,EAAG,OAE3C,MAAME,EAAc,GAAM,IAEDF,EAAA,QAASN,GAAoB,CACpD,GAAI,EAAEA,aAAmB,aAAc,OACvC,IAAIS,EAAmB,GACN,IAAI,qBAAsBX,GAAyC,CACzEA,EAAA,QAASY,GAAU,CAC1BD,EAAmBC,EAAM,cAAA,CAC1B,CAAA,CACF,EACQ,QAAQV,CAAO,EAEhBA,EAAA,MAAM,YAAY,kBAAmB,GAAG,EAAIQ,EAAcG,EAAeX,CAAO,GAAG,EAEpF,OAAA,iBACL,SACAY,EAAS,IAAM,CACRH,GAEGT,EAAA,MAAM,YAAY,kBAAmB,GAAG,EAAIQ,EAAcG,EAAeX,CAAO,GAAG,CAAA,CAC5F,EACD,CAAE,QAAS,EAAK,CAAA,CAClB,CACD,CACH,CAEA,SAASW,EAAeX,EAAqB,CAC3C,MAAMa,EAAiB,OAAO,YACxBC,EAAU,OAAO,QACjBC,EAAmBf,EAAQ,sBAAsB,EAAE,IAAMc,EACzDE,EAAgBhB,EAAQ,aAE1B,GAAAe,EAAmBD,EAAUD,EAExB,MAAA,GACT,GAAWE,EAAmBC,EAAgBF,EAErC,MAAA,KAKL,IAAAG,GADaH,EAAUD,EAAiBE,KACdF,EAAiBG,GAAiB,KACzD,OAAA,KAAK,MAAMC,CAAU,CAC9B,CAEA,OAAO,iBAAiB,mBAAoB,IAAM,CACfd,IACII,GACvC,CAAC,EAEG,OAAO,QAAQ,aACR,SAAA,iBAAiB,uBAAyBW,GAAgB,EAC7DA,EAAM,kBAAkB,aAAeA,EAAM,kBAAkB,WAChCf,EAAAe,EAAM,OAAQ,EAAI,CACrD,CAED,EACD,SAAS,iBAAiB,0BAA2B,IAAMf,EAAiC,SAAU,EAAI,CAAC"}