{"version":3,"file":"search-form-7a1a7c97.js","sources":["../src/scripts/theme/search-form.ts"],"sourcesContent":["import { debounce, qsRequired } from '@/scripts/functions'\nimport { UcoastEl } from '@/scripts/core/UcoastEl'\n\nexport class SearchForm extends UcoastEl {\n\tstatic htmlSelector = 'search-form'\n\tinput: HTMLInputElement\n\tresetButton: HTMLButtonElement\n\tform: HTMLFormElement\n\tconstructor() {\n\t\tsuper()\n\t\tthis.input = qsRequired('input[type=\"search\"]', this)\n\t\tconst form = this.input.form\n\t\tif (!form) throw new Error('input is not in a form element')\n\t\tthis.form = form\n\t\tthis.resetButton = qsRequired('button[type=\"reset\"]', this)\n\n\t\tthis.form.addEventListener('reset', this.onFormReset.bind(this))\n\t\tthis.input.addEventListener(\n\t\t\t'input',\n\t\t\tdebounce((_event: Event) => {\n\t\t\t\tthis.onChange()\n\t\t\t}, 300).bind(this)\n\t\t)\n\t}\n\n\ttoggleResetButton() {\n\t\tconst resetIsHidden = this.resetButton.classList.contains('hidden')\n\t\tif (this.input.value.length > 0 && resetIsHidden) {\n\t\t\tthis.resetButton.classList.remove('hidden')\n\t\t} else if (this.input.value.length === 0 && !resetIsHidden) {\n\t\t\tthis.resetButton.classList.add('hidden')\n\t\t}\n\t}\n\n\tonChange() {\n\t\tthis.toggleResetButton()\n\t}\n\n\tshouldResetForm() {\n\t\treturn !document.querySelector('[aria-selected=\"true\"] a')\n\t}\n\n\tonFormReset(event: Event) {\n\t\t// Prevent default so the form reset doesn't set the value gotten from the url on page load\n\t\tevent.preventDefault()\n\t\t// Don't reset if the user has selected an element on the predictive search dropdown\n\t\tif (this.shouldResetForm()) {\n\t\t\tthis.input.value = ''\n\t\t\tthis.input.focus()\n\t\t\tthis.toggleResetButton()\n\t\t}\n\t}\n}\n\ncustomElements.define('search-form', SearchForm)\n"],"names":["SearchForm","UcoastEl","qsRequired","form","debounce","_event","resetIsHidden","event"],"mappings":"8FAGO,MAAMA,UAAmBC,CAAS,CAKxC,aAAc,CACP,QACD,KAAA,MAAQC,EAAW,uBAAwB,IAAI,EAC9C,MAAAC,EAAO,KAAK,MAAM,KACxB,GAAI,CAACA,EAAY,MAAA,IAAI,MAAM,gCAAgC,EAC3D,KAAK,KAAOA,EACP,KAAA,YAAcD,EAAW,uBAAwB,IAAI,EAE1D,KAAK,KAAK,iBAAiB,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,EAC/D,KAAK,MAAM,iBACV,QACAE,EAAUC,GAAkB,CAC3B,KAAK,SAAS,CAAA,EACZ,GAAG,EAAE,KAAK,IAAI,CAAA,CAEnB,CAEA,mBAAoB,CACnB,MAAMC,EAAgB,KAAK,YAAY,UAAU,SAAS,QAAQ,EAC9D,KAAK,MAAM,MAAM,OAAS,GAAKA,EAC7B,KAAA,YAAY,UAAU,OAAO,QAAQ,EAChC,KAAK,MAAM,MAAM,SAAW,GAAK,CAACA,GACvC,KAAA,YAAY,UAAU,IAAI,QAAQ,CAEzC,CAEA,UAAW,CACV,KAAK,kBAAkB,CACxB,CAEA,iBAAkB,CACV,MAAA,CAAC,SAAS,cAAc,0BAA0B,CAC1D,CAEA,YAAYC,EAAc,CAEzBA,EAAM,eAAe,EAEjB,KAAK,oBACR,KAAK,MAAM,MAAQ,GACnB,KAAK,MAAM,QACX,KAAK,kBAAkB,EAEzB,CACD,CAjDaP,EACL,aAAe,cAkDvB,eAAe,OAAO,cAAeA,CAAU"}