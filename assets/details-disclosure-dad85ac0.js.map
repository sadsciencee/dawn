{"version":3,"file":"details-disclosure-dad85ac0.js","sources":["../src/scripts/theme/details-disclosure.ts"],"sourcesContent":["import { qsRequired } from '@/scripts/functions'\nimport { UcoastEl } from '@/scripts/core/UcoastEl';\n\nexport class DetailsDisclosure extends UcoastEl {\n\tstatic htmlSelector = 'details-disclosure'\n\tmainDetailsToggle: HTMLDetailsElement\n\tcontent: HTMLElement\n\tanimations?: Animation[]\n\tconstructor() {\n\t\tsuper()\n\t\tthis.mainDetailsToggle = qsRequired('details', this)\n\t\tthis.content = qsRequired('summary', this.mainDetailsToggle, 'nextElementSibling')\n\n\t\tthis.mainDetailsToggle.addEventListener('focusout', this.onFocusOut.bind(this))\n\t\tthis.mainDetailsToggle.addEventListener('toggle', this.onToggle.bind(this))\n\t}\n\n\tonFocusOut() {\n\t\tsetTimeout(() => {\n\t\t\tif (!this.contains(document.activeElement)) this.close()\n\t\t})\n\t}\n\n\tonToggle() {\n\t\tif (!this.animations) this.animations = this.content.getAnimations()\n\n\t\tif (this.mainDetailsToggle.hasAttribute('open')) {\n\t\t\tthis.animations.forEach((animation) => animation.play())\n\t\t} else {\n\t\t\tthis.animations.forEach((animation) => animation.cancel())\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis.mainDetailsToggle.removeAttribute('open')\n\t\tqsRequired('summary', this.mainDetailsToggle).setAttribute('aria-expanded', 'false')\n\t}\n}\n"],"names":["DetailsDisclosure","UcoastEl","qsRequired","animation"],"mappings":"uFAGO,MAAMA,UAA0BC,CAAS,CAK/C,aAAc,CACP,QACD,KAAA,kBAAoBC,EAAW,UAAW,IAAI,EACnD,KAAK,QAAUA,EAAW,UAAW,KAAK,kBAAmB,oBAAoB,EAEjF,KAAK,kBAAkB,iBAAiB,WAAY,KAAK,WAAW,KAAK,IAAI,CAAC,EAC9E,KAAK,kBAAkB,iBAAiB,SAAU,KAAK,SAAS,KAAK,IAAI,CAAC,CAC3E,CAEA,YAAa,CACZ,WAAW,IAAM,CACX,KAAK,SAAS,SAAS,aAAa,GAAG,KAAK,MAAM,CAAA,CACvD,CACF,CAEA,UAAW,CACL,KAAK,aAAiB,KAAA,WAAa,KAAK,QAAQ,cAAc,GAE/D,KAAK,kBAAkB,aAAa,MAAM,EAC7C,KAAK,WAAW,QAASC,GAAcA,EAAU,MAAM,EAEvD,KAAK,WAAW,QAASA,GAAcA,EAAU,QAAQ,CAE3D,CAEA,OAAQ,CACF,KAAA,kBAAkB,gBAAgB,MAAM,EAC7CD,EAAW,UAAW,KAAK,iBAAiB,EAAE,aAAa,gBAAiB,OAAO,CACpF,CACD,CAlCaF,EACL,aAAe"}