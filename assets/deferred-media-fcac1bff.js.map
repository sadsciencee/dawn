{"version":3,"file":"deferred-media-fcac1bff.js","sources":["../src/scripts/theme/deferred-media.ts"],"sourcesContent":["import { pauseAllMedia, qsRequired } from '@/scripts/functions'\nimport { UcoastEl } from '@/scripts/core/UcoastEl'\n\nexport class DeferredMedia extends UcoastEl {\n\tstatic htmlSelector = 'deferred-media'\n\twidth?: number\n\tconstructor() {\n\t\tsuper()\n\t\tconst poster = this.querySelector('[id^=\"Deferred-Poster-\"]')\n\t\tif (!poster) return\n\t\tposter.addEventListener('click', this.loadContent.bind(this))\n\t}\n\n\tgetTemplate() {\n\t\treturn qsRequired<HTMLTemplateElement>('template', this)\n\t}\n\n\tloadContent(focus = true) {\n\t\tpauseAllMedia()\n\t\tif (!this.getAttribute('loaded')) {\n\t\t\tconst content = document.createElement('div')\n\t\t\tconst template = this.getTemplate()\n\t\t\tif (!template || !template.content || !template.content.firstElementChild) {\n\t\t\t\tthrow new Error('No template content found')\n\t\t\t}\n\t\t\tcontent.appendChild(template.content.firstElementChild.cloneNode(true))\n\n\t\t\tthis.setAttribute('loaded', 'true')\n\t\t\tconst deferredElement = this.appendChild(\n\t\t\t\tqsRequired('video, model-viewer, iframe', content)\n\t\t\t)\n\t\t\tif (focus) deferredElement.focus()\n\t\t\tif (\n\t\t\t\tdeferredElement instanceof HTMLVideoElement &&\n\t\t\t\tdeferredElement.getAttribute('autoplay')\n\t\t\t) {\n\t\t\t\t// force autoplay for safari\n\t\t\t\tvoid deferredElement.play()\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["DeferredMedia","UcoastEl","poster","qsRequired","focus","pauseAllMedia","content","template","deferredElement"],"mappings":"8FAGO,MAAMA,UAAsBC,CAAS,CAG3C,aAAc,CACP,QACA,MAAAC,EAAS,KAAK,cAAc,0BAA0B,EACvDA,GACLA,EAAO,iBAAiB,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,CAC7D,CAEA,aAAc,CACN,OAAAC,EAAgC,WAAY,IAAI,CACxD,CAEA,YAAYC,EAAQ,GAAM,CAEzB,GADcC,IACV,CAAC,KAAK,aAAa,QAAQ,EAAG,CAC3B,MAAAC,EAAU,SAAS,cAAc,KAAK,EACtCC,EAAW,KAAK,cAClB,GAAA,CAACA,GAAY,CAACA,EAAS,SAAW,CAACA,EAAS,QAAQ,kBACjD,MAAA,IAAI,MAAM,2BAA2B,EAE5CD,EAAQ,YAAYC,EAAS,QAAQ,kBAAkB,UAAU,EAAI,CAAC,EAEjE,KAAA,aAAa,SAAU,MAAM,EAClC,MAAMC,EAAkB,KAAK,YAC5BL,EAAW,8BAA+BG,CAAO,CAAA,EAE9CF,GAAOI,EAAgB,MAAM,EAEhCA,aAA2B,kBAC3BA,EAAgB,aAAa,UAAU,GAGlCA,EAAgB,OAGxB,CACD,CAtCaR,EACL,aAAe"}