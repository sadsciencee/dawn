{"version":3,"file":"UcoastEl-7a35b61d.js","sources":["../src/scripts/core/UcoastEl.ts"],"sourcesContent":["import { qsaOptional } from '@/scripts/functions'\n\nexport class UcoastEl extends HTMLElement {\n\tanimateSelf: boolean\n\tanimationObserver: IntersectionObserver | null\n\tanimateableElements?: NodeListOf<HTMLElement>\n\tconstructor() {\n\t\tsuper()\n\t\tthis.animateSelf = this.hasAttribute('data-uc-animate')\n\t\tthis.animateableElements = qsaOptional('[data-uc-animate]', this)\n\t\tthis.animationObserver = null\n\t}\n\tconnectedCallback() {\n\t\tif (this.animateSelf || this.animateableElements) {\n\t\t\tthis.animateOut()\n\t\t\tthis.observeVisibility()\n\t\t}\n\t}\n\tanimateIn() {\n\t\tif (this.animateSelf) {\n\t\t\tthis.setAttribute('data-uc-animate', 'in')\n\t\t} else if (this.animateableElements) {\n\t\t\tthis.animateableElements.forEach((el) => {\n\t\t\t\tel.setAttribute('data-uc-animate', 'in')\n\t\t\t})\n\t\t}\n\t}\n\tanimateOut() {\n\t\tif (this.animateSelf) {\n\t\t\tthis.setAttribute('data-uc-animate', 'ready')\n\t\t} else if (this.animateableElements) {\n\t\t\tthis.animateableElements.forEach((el) => {\n\t\t\t\tel.setAttribute('data-uc-animate', 'ready')\n\t\t\t})\n\t\t}\n\t}\n\tobserveVisibility() {\n\t\tconst animateArea = this.getAttribute('data-uc-animate-area')\n\t\tconst threshold = animateArea ? parseFloat(animateArea) / 100 : 1.0\n\n\t\tconst options = {\n\t\t\troot: null,\n\t\t\trootMargin: '0px',\n\t\t\tthreshold: threshold,\n\t\t}\n\n\t\tthis.animationObserver = new IntersectionObserver((entries) => {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting && entry.intersectionRatio >= threshold) {\n\t\t\t\t\tthis.animateIn()\n\t\t\t\t} else {\n\t\t\t\t\tthis.animateOut()\n\t\t\t\t}\n\t\t\t})\n\t\t}, options)\n\n\t\tif (this.animateSelf) {\n\t\t\tthis.animationObserver.observe(this)\n\t\t} else if (this.animateableElements) {\n\t\t\tthis.animateableElements.forEach((el) => this.animationObserver?.observe(el))\n\t\t}\n\t}\n\tdisconnectedCallback() {\n\t\tif (this.animationObserver) {\n\t\t\tthis.animationObserver.disconnect()\n\t\t}\n\t}\n\tvalidate(el: HTMLElement) {\n\t\treturn el instanceof this.constructor\n\t}\n\tvalidated(el: HTMLElement, required: boolean) {\n\t\tconst isValid = this.validate(el)\n\t\tif (isValid) return el\n\t\tif (required) throw new Error('Class Instance Not Valid')\n\t\treturn undefined\n\t}\n}\n"],"names":["UcoastEl","qsaOptional","el","animateArea","threshold","options","entries","entry","_a","required"],"mappings":"4CAEO,MAAMA,UAAiB,WAAY,CAIzC,aAAc,CACP,QACD,KAAA,YAAc,KAAK,aAAa,iBAAiB,EACjD,KAAA,oBAAsBC,EAAY,oBAAqB,IAAI,EAChE,KAAK,kBAAoB,IAC1B,CACA,mBAAoB,EACf,KAAK,aAAe,KAAK,uBAC5B,KAAK,WAAW,EAChB,KAAK,kBAAkB,EAEzB,CACA,WAAY,CACP,KAAK,YACH,KAAA,aAAa,kBAAmB,IAAI,EAC/B,KAAK,qBACV,KAAA,oBAAoB,QAASC,GAAO,CACrCA,EAAA,aAAa,kBAAmB,IAAI,CAAA,CACvC,CAEH,CACA,YAAa,CACR,KAAK,YACH,KAAA,aAAa,kBAAmB,OAAO,EAClC,KAAK,qBACV,KAAA,oBAAoB,QAASA,GAAO,CACrCA,EAAA,aAAa,kBAAmB,OAAO,CAAA,CAC1C,CAEH,CACA,mBAAoB,CACb,MAAAC,EAAc,KAAK,aAAa,sBAAsB,EACtDC,EAAYD,EAAc,WAAWA,CAAW,EAAI,IAAM,EAE1DE,EAAU,CACf,KAAM,KACN,WAAY,MACZ,UAAAD,CAAA,EAGD,KAAK,kBAAoB,IAAI,qBAAsBE,GAAY,CACtDA,EAAA,QAASC,GAAU,CACtBA,EAAM,gBAAkBA,EAAM,mBAAqBH,EACtD,KAAK,UAAU,EAEf,KAAK,WAAW,CACjB,CACA,GACCC,CAAO,EAEN,KAAK,YACH,KAAA,kBAAkB,QAAQ,IAAI,EACzB,KAAK,qBACV,KAAA,oBAAoB,QAASH,GAAA,OAAO,OAAAM,EAAA,KAAK,oBAAL,YAAAA,EAAwB,QAAQN,GAAG,CAE9E,CACA,sBAAuB,CAClB,KAAK,mBACR,KAAK,kBAAkB,YAEzB,CACA,SAASA,EAAiB,CACzB,OAAOA,aAAc,KAAK,WAC3B,CACA,UAAUA,EAAiBO,EAAmB,CAEzC,GADY,KAAK,SAASP,CAAE,EACZ,OAAAA,EAChB,GAAAO,EAAgB,MAAA,IAAI,MAAM,0BAA0B,CAEzD,CACD"}